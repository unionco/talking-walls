jQuery(document).ready(function(s){var e=function(){var e='<li><a href="" data-sort="gd-themes" class="js-gd-themes">'+gdThemesTab.tab+"</a></li>";s(".wp-filter > .filter-links").append(e),s(".page-title-action").attr("aria-expanded",!0)},t=function(){var e=s(".add-new-theme");e.remove(),s(".theme-browser .themes").prepend(e)},a=wp.themes.view.Installer.prototype,l=s("body");wp.themes.view.Installer=wp.themes.view.Installer.extend({events:function(){var e=_.extend({},a.events,{"click .filter-links li > a.js-gd-themes":"gdThemes"});return delete e["click .filter-links li > a"],e["click .filter-links li > a:not( .js-gd-themes )"]="onSort",e},browse:function(e){"gd-themes"!==e?this.collection.query({browse:e}):this.loadThemes()},gdThemes:function(e){e.preventDefault(),this.clearSearch();var t=s(e.target),a=t.data("sort");t.hasClass(this.activeClass)||(l.removeClass("filters-applied show-filters"),s(".drawer-toggle").attr("aria-expanded","false"),l.removeClass("show-favorites-form"),s(".filter-links li > a, .theme-filter").removeClass(this.activeClass),s('[data-sort="'+a+'"]').addClass(this.activeClass),this.loadThemes(),wp.themes.router.navigate(wp.themes.router.baseUrl(wp.themes.router.browsePath+a)))},loadThemes:function(){l.addClass("loading-content").removeClass("no-results"),s.post(ajaxurl,{action:"gd_render_themes"},function(e){e.success&&(l.removeClass("loading-content"),s(".theme-browser .themes").empty().append(e.data),s(".theme-count").text(s(".theme-browser .themes > div.theme").length))}),s("#gd-theme-install").length||s(".theme-browser .themes").after('<div id="gd-theme-install" style="display:none;"></div>')},scroller:function(){s(".js-gd-themes").hasClass("current")||a.scroller.apply(this,arguments)}});var i=function(t){var e={action:"gd_install_theme",slug:t.data("slug"),gd_package:t.data("package"),_ajax_nonce:t.data("nonce")};s.post(ajaxurl,e,function(e){if(!e.success)return s('div[data-slug="'+t.data("slug")+'"]').append('<div class="notice notice-error notice-alt update-message"><p>'+gdThemesTab.error+"</p></div>"),void t.removeClass("updating-message");s('div[data-slug="'+t.data("slug")+'"]').append('<div class="notice notice-success notice-alt"><p>'+gdThemesTab.installed+"</p></div>").removeClass("focus").find(".theme-actions > .theme-install").removeClass("updating-message").text(gdThemesTab.installed).addClass("disabled").delay(1500).replaceWith('<a class="button button-primary activate-theme" href="'+e.data.activateUrl+'">'+gdThemesTab.activate+'</a><a class="button button-secondary live-preview-theme" href="'+e.data.customizeUrl+'">'+gdThemesTab.live_preview+"</a>")})};e(),s(window).on("load",t),s(document).on("click",".theme.godaddy .theme-screenshot, .theme.godaddy .more-details",function(){var e=s(this).closest(".theme.godaddy").attr("data-demo-url");window.open(e,"_blank")}),s(document).on("click",".theme.godaddy .button.theme-install",function(e){e.preventDefault(),e.stopPropagation(),s(this).addClass("updating-message").parents("div.theme").addClass("focus"),i(s(this))})});